# ============================================================================
# TSH ERP Ecosystem - Staging Environment Configuration
# ============================================================================
# Purpose: Testing and validation environment
# URL: staging.erp.tsh.sale
# ============================================================================

# ============================================================================
# Application Settings
# ============================================================================
ENVIRONMENT=staging
VERSION=staging-latest
APP_NAME=TSH ERP Staging
APP_BASE_URL=https://staging.erp.tsh.sale

# ============================================================================
# Database Configuration
# ============================================================================
POSTGRES_DB=tsh_erp_staging
POSTGRES_USER=tsh_admin
POSTGRES_PASSWORD=<CHANGE_ME_SECURE_PASSWORD>
POSTGRES_PORT=5433
POSTGRES_MAX_CONNECTIONS=100
DATABASE_URL=postgresql://tsh_admin:<PASSWORD>@tsh_postgres_staging:5432/tsh_erp_staging

# ============================================================================
# Redis Configuration
# ============================================================================
REDIS_URL=redis://redis_staging:6379/0
REDIS_PORT=6380

# ============================================================================
# Security & Authentication
# ============================================================================
JWT_SECRET_KEY=<CHANGE_ME_RANDOM_256_BIT_KEY>
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=1440
JWT_REFRESH_TOKEN_EXPIRE_DAYS=30

# Admin credentials (for initial setup)
ADMIN_EMAIL=admin@staging.tsh.sale
ADMIN_PASSWORD=<CHANGE_ME_SECURE_PASSWORD>
ADMIN_FULL_NAME=Staging Administrator

# ============================================================================
# Uvicorn/FastAPI Settings
# ============================================================================
UVICORN_WORKERS=2
UVICORN_HOST=0.0.0.0
UVICORN_PORT=8000
UVICORN_LOG_LEVEL=debug

# ============================================================================
# NeuroLink Configuration
# ============================================================================
# Database
NEUROLINK_DATABASE_URL=postgresql+asyncpg://tsh_admin:<PASSWORD>@tsh_postgres_staging:5432/tsh_erp_staging
NEUROLINK_DB_POOL_SIZE=10
NEUROLINK_DB_MAX_OVERFLOW=5

# Redis
NEUROLINK_REDIS_URL=redis://redis_staging:6379/2

# Email (Resend)
RESEND_API_KEY=<CHANGE_ME_RESEND_API_KEY>
EMAIL_FROM_ADDRESS=notifications@staging.tsh.sale
EMAIL_FROM_NAME=TSH ERP Staging

# Workers
NEUROLINK_WORKERS=2
NEUROLINK_LOG_LEVEL=DEBUG
NEUROLINK_PORT=8002
EVENT_BATCH_SIZE=50

# ============================================================================
# TDS Dashboard Configuration
# ============================================================================
NEXT_PUBLIC_API_URL=http://app_staging:8000
NEXT_PUBLIC_SOCKET_URL=ws://app_staging:8000
TDS_DASHBOARD_PORT=3001

# ============================================================================
# Zoho Integration (via TDS Core)
# ============================================================================
ZOHO_CLIENT_ID=<CHANGE_ME_ZOHO_CLIENT_ID>
ZOHO_CLIENT_SECRET=<CHANGE_ME_ZOHO_CLIENT_SECRET>
ZOHO_REDIRECT_URI=https://staging.tds.tsh.sale/oauth/callback
ZOHO_ORGANIZATION_ID=748369814
ZOHO_BOOKS_API_URL=https://www.zohoapis.com/books/v3
ZOHO_INVENTORY_API_URL=https://www.zohoapis.com/inventory/v1
ZOHO_REFRESH_TOKEN=<CHANGE_ME_ZOHO_REFRESH_TOKEN>

# ============================================================================
# AWS S3 Configuration (Backups)
# ============================================================================
AWS_ACCESS_KEY_ID=<CHANGE_ME_AWS_ACCESS_KEY>
AWS_SECRET_ACCESS_KEY=<CHANGE_ME_AWS_SECRET_KEY>
AWS_REGION=eu-north-1
AWS_S3_BUCKET=tsh-erp-backups-staging

# ============================================================================
# File Upload Settings
# ============================================================================
UPLOAD_DIR=/app/uploads
MAX_UPLOAD_SIZE=10485760
ALLOWED_EXTENSIONS=jpg,jpeg,png,pdf,xlsx,csv

# ============================================================================
# CORS Settings
# ============================================================================
CORS_ORIGINS=https://staging.erp.tsh.sale,https://staging.consumer.tsh.sale,https://staging.tds.tsh.sale
CORS_ALLOW_CREDENTIALS=true

# ============================================================================
# Logging Configuration
# ============================================================================
LOG_LEVEL=DEBUG
LOG_FORMAT=json
LOG_DIR=/var/log/tsh_erp

# ============================================================================
# Feature Flags
# ============================================================================
ENABLE_REGISTRATION=false
ENABLE_EMAIL_VERIFICATION=true
ENABLE_TWO_FACTOR_AUTH=false
ENABLE_API_DOCUMENTATION=true

# ============================================================================
# Rate Limiting
# ============================================================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=120
RATE_LIMIT_PER_HOUR=3600

# ============================================================================
# Monitoring & Alerts
# ============================================================================
SENTRY_DSN=<OPTIONAL_SENTRY_DSN>
ENABLE_PERFORMANCE_MONITORING=true

# ============================================================================
# Third-Party Integrations
# ============================================================================
# WhatsApp Business (optional for staging)
WHATSAPP_API_URL=https://graph.facebook.com/v17.0
WHATSAPP_PHONE_NUMBER_ID=<OPTIONAL>
WHATSAPP_ACCESS_TOKEN=<OPTIONAL>

# ============================================================================
# Notification Channels
# ============================================================================
TELEGRAM_BOT_TOKEN=<OPTIONAL_FOR_ALERTS>
TELEGRAM_CHAT_ID=<OPTIONAL_FOR_ALERTS>

# ============================================================================
# Docker Compose Settings
# ============================================================================
COMPOSE_PROJECT_NAME=tsh_erp_staging
COMPOSE_FILE=docker-compose.staging.yml
