================================================================================
TSH ERP ECOSYSTEM - QUICK START CARD
================================================================================
Last Updated: 2025-11-13
Purpose: Ultra-fast reference for session start (< 60 seconds)

================================================================================
‚ùå NEVER DO THIS
================================================================================
‚ùå Access Zoho Books/Inventory APIs directly (MUST use TDS Core)
‚ùå Write to Zoho in Phase 1 (read-only migration phase)
‚ùå Deploy backend without frontend (deploy ALL components)
‚ùå Deploy frontend without backend (deploy ALL components)
‚ùå Push directly to main branch (push to develop first)
‚ùå Skip staging verification
‚ùå Forget Arabic fields (name_ar, description_ar mandatory)
‚ùå Bypass authentication (require get_current_user)
‚ùå Return > 100 records without pagination
‚ùå Suggest changing tech stack (FastAPI/Flutter/PostgreSQL fixed)
‚ùå Use Twilio (NOT used in this project)

================================================================================
‚úÖ ALWAYS DO THIS
================================================================================
‚úÖ Search existing code before creating new (grep, find, Task tool)
‚úÖ Include Arabic fields (name_ar, description_ar) on user-facing models
‚úÖ Paginate lists (max 100 per page, use offset/limit)
‚úÖ Add indexes on foreign keys and search fields
‚úÖ Use parameterized queries (prevent SQL injection)
‚úÖ Authenticate sensitive endpoints (Depends(get_current_user))
‚úÖ Authorize admin operations (require_role(["admin", "manager"]))
‚úÖ Validate input with Pydantic schemas
‚úÖ Add error handling (try/except blocks)
‚úÖ Deploy ALL components together (backend + frontend + TDS)
‚úÖ Test on staging before production
‚úÖ Go through TDS Core for ALL Zoho operations

================================================================================
üìç CRITICAL PROJECT CONTEXT
================================================================================
Project:    TSH ERP Ecosystem (Production system)
Location:   /Users/khaleelal-mulla/TSH_ERP_Ecosystem
Purpose:    Import-distribution-retail ERP for Iraq market
Mode:       Development (deploy anytime to staging/production)
Phase:      Zoho Migration Phase 1 (read-only via TDS Core)

Scale:
  ‚Ä¢ 500+ wholesale clients
  ‚Ä¢ 2,218+ active products
  ‚Ä¢ 30+ daily wholesale orders
  ‚Ä¢ 30+ daily retail transactions
  ‚Ä¢ 100+ partner salesmen
  ‚Ä¢ 12 travel salespersons ($35K USD/week)
  ‚Ä¢ Multi-million IQD daily transaction volume

Tech Stack (NON-NEGOTIABLE):
  ‚Ä¢ Backend:  FastAPI + Python 3.9+ + PostgreSQL 12+
  ‚Ä¢ Frontend: React 18+ (ERP Admin) + Flutter Web (Consumer)
  ‚Ä¢ Mobile:   Flutter 3.0+ (8 apps)
  ‚Ä¢ Deploy:   GitHub Actions ‚Üí VPS (167.71.39.50)
  ‚Ä¢ Backup:   AWS S3 (tsh-erp-backups, eu-north-1)
  ‚Ä¢ Sync:     TDS Core (controls ALL Zoho operations)

================================================================================
üìÇ CRITICAL FILE PATHS
================================================================================
Documentation:  /.claude/                       (23 markdown files)
Backend API:    /app/                          (FastAPI)
  ‚îú‚îÄ Models:    /app/models/                   (SQLAlchemy)
  ‚îú‚îÄ Routers:   /app/routers/                  (API endpoints)
  ‚îú‚îÄ Services:  /app/services/                 (Business logic)
  ‚îî‚îÄ Schemas:   /app/schemas/                  (Pydantic validation)

Frontend Web:   /apps/consumer/                (Flutter Web)
                /apps/tds_dashboard/           (TDS monitoring)

Mobile Apps:    /mobile/                       (8 Flutter apps)
Scripts:        /scripts/                      (82 utility scripts)
Database:       /database/                     (Schema & migrations)
CI/CD:          /.github/workflows/            (Deployment pipelines)

================================================================================
üîó KEY URLS
================================================================================
Production:
  ERP Admin:      https://erp.tsh.sale
  Consumer:       https://consumer.tsh.sale
  Shop:           https://shop.tsh.sale
  TDS Dashboard:  https://tds.tsh.sale

Staging:
  ERP Admin:      https://staging.erp.tsh.sale
  Consumer:       https://staging.consumer.tsh.sale
  TDS Dashboard:  https://staging.tds.tsh.sale

External:
  GitHub:         https://github.com/Qmop1967/tsh-erp-system
  Zoho Books:     https://books.zoho.com/app#/home/dashboard/748369814
  Zoho Inventory: https://inventory.zoho.com/app#/home/748369814

VPS:
  IP:             167.71.39.50
  User:           root
  Access:         SSH key

================================================================================
‚ö° QUICK COMMANDS (Copy-Paste Ready)
================================================================================
# Git operations
git status
git branch
git log --oneline -5
git push origin develop

# Session context
./scripts/session_context.sh

# Verify documentation
./.claude/verify_context.sh

# Search documentation
./.claude/search_docs.sh "search term"

# Check deployments
gh run list --limit 3
gh run watch <run-id>

# Health checks
curl https://staging.erp.tsh.sale/health
curl https://erp.tsh.sale/health

# Database check
PGPASSWORD='TSH@2025Secure!Production' psql -h localhost -U tsh_app_user -d tsh_erp_production -c "SELECT COUNT(*) as active_products FROM products WHERE is_active = true;"

# VPS access
ssh root@167.71.39.50

================================================================================
üìö DOCUMENTATION QUICK ACCESS
================================================================================
Session Start:          .claude/CLAUDE.md
Quick Reference:        .claude/QUICK_REFERENCE.md
Business Context:       .claude/PROJECT_VISION.md
Technical Rules:        .claude/ARCHITECTURE_RULES.md
Code Templates:         .claude/CODE_TEMPLATES.md
Task Workflows:         .claude/TASK_PATTERNS.md
Emergency Procedures:   .claude/FAILSAFE_PROTOCOL.md
Performance Tips:       .claude/PERFORMANCE_OPTIMIZATION.md
Navigation Index:       .claude/KNOWLEDGE_PORTAL.md

================================================================================
üéØ DEPLOYMENT WORKFLOW (Critical!)
================================================================================
1. Push to develop branch           ‚Üí Auto-deploy to staging
2. Test thoroughly on staging       ‚Üí Verify all URLs work
3. Get Khaleel approval             ‚Üí Confirm ready for production
4. Create PR (develop ‚Üí main)       ‚Üí Review changes
5. Merge to main                    ‚Üí Auto-deploy to production
6. Monitor deployment               ‚Üí Check GitHub Actions
7. Verify production URLs           ‚Üí Test all endpoints
8. Monitor for issues               ‚Üí Check logs, errors

CRITICAL: ALWAYS deploy ALL components together:
  ‚úÖ Backend API (FastAPI)
  ‚úÖ ERP Admin Frontend (React)
  ‚úÖ Consumer App (Flutter Web)
  ‚úÖ TDS Core Worker
  ‚úÖ TDS Dashboard

================================================================================
üö® EMERGENCY CONTACTS & ACTIONS
================================================================================
Production Down:
  1. curl https://erp.tsh.sale/health
  2. gh run list --limit 3
  3. ssh root@167.71.39.50
  4. systemctl status tsh-erp
  5. Alert Khaleel immediately
  6. Follow .claude/FAILSAFE_PROTOCOL.md

Zoho Sync Failed:
  1. Check https://tds.tsh.sale
  2. Check TDS Core logs
  3. Restart TDS Core: systemctl restart tds-core
  4. Follow .claude/ZOHO_SYNC_RULES.md

Database Issues:
  1. Check connections: SELECT count(*) FROM pg_stat_activity;
  2. Check locks: SELECT * FROM pg_locks WHERE NOT granted;
  3. Restart if needed: systemctl restart postgresql
  4. Alert Khaleel if data corruption suspected

================================================================================
‚úÖ SESSION START CHECKLIST
================================================================================
‚ñ° Working directory: /Users/khaleelal-mulla/TSH_ERP_Ecosystem
‚ñ° Read CLAUDE.md (session start instructions)
‚ñ° Read AI_CONTEXT_RULES.md (meta-guide)
‚ñ° Read PROJECT_VISION.md (business context)
‚ñ° Read QUICK_REFERENCE.md (60-second overview)
‚ñ° Understand: Production system with real revenue
‚ñ° Understand: 500+ clients depend on this daily
‚ñ° Understand: Tech stack non-negotiable
‚ñ° Understand: Zoho Migration Phase 1 (read-only)
‚ñ° Understand: NO TWILIO platform

Status: READY TO WORK ‚úÖ

================================================================================
END OF QUICK START CARD
================================================================================
