# TSH ERP System

ูุธุงู ERP ุดุงูู ูุจูู ุจุงุณุชุฎุฏุงู FastAPI ู PostgreSQL ูุฏุนู ุงููุญุงุณุจุฉ ูููุงุท ุงูุจูุน ูุน ุฏุนู ูุชุนุฏุฏ ุงููุบุงุช ูุงูุนููุงุช.

## โจ ุงููููุฒุงุช ุงูุฌุฏูุฏุฉ

### ๐งฎ ูุธุงู ุงููุญุงุณุจุฉ
- **ุฏุนู ุงูุนููุงุช ุงููุชุนุฏุฏุฉ**: IQD (ุฏููุงุฑ ุนุฑุงูู), USD (ุฏููุงุฑ ุฃูุฑููู), RMB (ููุงู ุตููู)
- **ุฏุนู ุงููุบุงุช ุงููุชุนุฏุฏุฉ**: ุงูุนุฑุจูุฉ ูุงูุฅูุฌููุฒูุฉ
- **ุฏููู ุงูุญุณุงุจุงุช**: ุฅุฏุงุฑุฉ ุดุงููุฉ ูุฏููู ุงูุญุณุงุจุงุช ูุน ุงููููู ุงููุฑูู
- **ุฏูุงุชุฑ ุงูููููุฉ**: ุฅุฏุงุฑุฉ ูุชุนุฏุฏุฉ ูุฏูุงุชุฑ ุงูููููุฉ (ุนุงูุ ูุจูุนุงุชุ ูุดุชุฑูุงุชุ ููุฏูุฉ)
- **ุงููููุฏ ุงููุญุงุณุจูุฉ**: ุฅูุดุงุก ูุชุฑุญูู ูุนูุณ ุงููููุฏ ุงููุญุงุณุจูุฉ
- **ุงูุณููุงุช ูุงููุชุฑุงุช ุงููุงููุฉ**: ุฅุฏุงุฑุฉ ุงูุณููุงุช ุงููุงููุฉ ูุงููุชุฑุงุช ุงููุญุงุณุจูุฉ
- **ุงูุชูุงุฑูุฑ ุงููุงููุฉ**: ููุฒุงู ุงููุฑุงุฌุนุฉุ ุงูููุฒุงููุฉ ุงูุนููููุฉุ ูุงุฆูุฉ ุงูุฏุฎู
- **ุฃุณุนุงุฑ ุงูุตุฑู**: ุฅุฏุงุฑุฉ ุฃุณุนุงุฑ ุงูุตุฑู ุจูู ุงูุนููุงุช

### ๐ ูุธุงู ููุงุท ุงูุจูุน (POS)
- **ุฅุฏุงุฑุฉ ุงูุฃุฌูุฒุฉ**: ุฅุฏุงุฑุฉ ุฃุฌูุฒุฉ ููุงุท ุงูุจูุน ุงููุชุนุฏุฏุฉ
- **ุงูุฌูุณุงุช**: ุฅุฏุงุฑุฉ ุฌูุณุงุช ุงูุจูุน ูุงูุตูุฏูู
- **ุงููุนุงููุงุช**: ูุนุงูุฌุฉ ุดุงููุฉ ูููุจูุนุงุช ูุงููุฑุชุฌุนุงุช
- **ุทุฑู ุงูุฏูุน ุงููุชุนุฏุฏุฉ**: ููุฏูุ ุจุทุงูุฉุ ุชุญููู
- **ูุธุงู ุงูุฎุตููุงุช**: ุฎุตููุงุช ูุณุจูุฉ ูุซุงุจุชุฉ ูุน ุดุฑูุท
- **ูุธุงู ุงูุนุฑูุถ**: ุนุฑูุถ ุงูุดุฑุงุก ูุงููุฏุงูุง
- **ุงูุชูุงุฑูุฑ**: ุชูุงุฑูุฑ ุงููุจูุนุงุช ูุงูุฌูุณุงุช ููุจูุนุงุช ุงูููุชุฌุงุช
- **ุฅุฏุงุฑุฉ ุงููุฎุฒูู**: ูุญุต ุชููุฑ ุงููุฎุฒูู ูู ุงูููุช ุงููุนูู

## ูุชุทูุจุงุช ุงููุธุงู

- Python 3.9+
- Docker ู Docker Compose (ููุชุดุบูู ุจุงุณุชุฎุฏุงู Docker)
- PostgreSQL (ููุชุดุบูู ุงููุญูู)

## ูููู ุงููุดุฑูุน

```
erp_system/
โโโ app/
โ   โโโ models/           # SQLAlchemy Models
โ   โโโ schemas/          # Pydantic Models
โ   โโโ routers/          # API Endpoints
โ   โโโ services/         # Business Logic
โ   โโโ db/
โ   โ   โโโ database.py   # Database connection
โ   โโโ main.py           # FastAPI app instance
โโโ alembic/              # Database migrations
โโโ .env.example          # Environment variables template
โโโ Dockerfile
โโโ docker-compose.yml
โโโ requirements.txt
โโโ README.md
```

## ุชุดุบูู ุงููุดุฑูุน

### ุจุงุณุชุฎุฏุงู Docker Compose (ุงูุทุฑููุฉ ุงูููุตู ุจูุง)

1. ุงุณุชูุณุฎ ุงููุดุฑูุน:
```bash
git clone <repository-url>
cd erp_system
```

2. ุฃูุดุฆ ููู `.env` ูู ุงููุงูุจ:
```bash
cp .env.example .env
```

3. ุดุบูู ุงููุดุฑูุน:
```bash
docker-compose up --build
```

4. ุงููุตูู ููุชุทุจูู:
   - **FastAPI App**: http://localhost:8000
   - **API Documentation**: http://localhost:8000/docs
   - **PGAdmin**: http://localhost:5050 (admin@example.com / admin)

### ุงูุชุดุบูู ุงููุญูู

1. ุชุซุจูุช ุงููุชุทูุจุงุช:
```bash
pip install -r requirements.txt
```

2. ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช:
```bash
# ุชุฃูุฏ ูู ุชุดุบูู PostgreSQL ูุญููุงู
createdb erp_db
```

3. ุชุญุฏูุซ ููู `.env` ูุน ุฅุนุฏุงุฏุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงููุญููุฉ:
```
DATABASE_URL=postgresql://username:password@localhost:5432/erp_db
```

4. ุชุดุบูู ุงููุฌุฑุงุช:
```bash
alembic upgrade head
```

5. ุชุดุบูู ุงูุชุทุจูู:
```bash
uvicorn app.main:app --reload
```

## ุงูููุงุฐุฌ ุงูุฃุณุงุณูุฉ

### Branch (ุงููุฑูุน)
- `id`: ุงููุนุฑู ุงููุฑูุฏ
- `name`: ุงุณู ุงููุฑุน
- `location`: ูููุน ุงููุฑุน

### Warehouse (ุงููุณุชูุฏุนุงุช)
- `id`: ุงููุนุฑู ุงููุฑูุฏ
- `name`: ุงุณู ุงููุณุชูุฏุน
- `branch_id`: ูุนุฑู ุงููุฑุน (ููุชุงุญ ุฎุงุฑุฌู)

### Role (ุงูุฃุฏูุงุฑ)
- `id`: ุงููุนุฑู ุงููุฑูุฏ
- `name`: ุงุณู ุงูุฏูุฑ (admin, sales_rep, partner, customer)

### User (ุงููุณุชุฎุฏููู)
- `id`: ุงููุนุฑู ุงููุฑูุฏ
- `name`: ุงุณู ุงููุณุชุฎุฏู
- `email`: ุงูุจุฑูุฏ ุงูุฅููุชุฑููู (ูุฑูุฏ)
- `password`: ูููุฉ ุงููุฑูุฑ (ูุดูุฑุฉ)
- `role_id`: ูุนุฑู ุงูุฏูุฑ (ููุชุงุญ ุฎุงุฑุฌู)
- `branch_id`: ูุนุฑู ุงููุฑุน (ููุชุงุญ ุฎุงุฑุฌู)

## ุฃูุงูุฑ ูููุฏุฉ

### ุฅุฏุงุฑุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช

```bash
# ุฅูุดุงุก ูุฌุฑุฉ ุฌุฏูุฏุฉ
alembic revision --autogenerate -m "ูุตู ุงูุชุบููุฑ"

# ุชุทุจูู ุงููุฌุฑุงุช
alembic upgrade head

# ุงูุชุฑุงุฌุน ุนู ูุฌุฑุฉ
alembic downgrade -1

# ุนุฑุถ ุชุงุฑูุฎ ุงููุฌุฑุงุช
alembic history
```

### Docker

```bash
# ุฅุนุงุฏุฉ ุจูุงุก ุงูุตูุฑ
docker-compose build --no-cache

# ุนุฑุถ ุงูุณุฌูุงุช
docker-compose logs -f web

# ุฅููุงู ุงูุฎุฏูุงุช
docker-compose down

# ุฅููุงู ุงูุฎุฏูุงุช ูุน ุญุฐู ุงูุจูุงูุงุช
docker-compose down -v
```

## ุชุทููุฑ ุงููุดุฑูุน

ุงููุดุฑูุน ููุนุฏู ููุชูุณุนุฉ ุงููุณุชูุจููุฉ. ููููู ุฅุถุงูุฉ:

1. **APIs ุฌุฏูุฏุฉ** ูู ูุฌูุฏ `app/routers/`
2. **ููุงุฐุฌ ุฌุฏูุฏุฉ** ูู ูุฌูุฏ `app/models/`
3. **ููุทู ุงูุนูู** ูู ูุฌูุฏ `app/services/`
4. **ูุฎุทุทุงุช ุงูุจูุงูุงุช** ูู ูุฌูุฏ `app/schemas/`

## ุงูุฃูุงู

- ูููุงุช ุงููุฑูุฑ ูุดูุฑุฉ ุจุงุณุชุฎุฏุงู bcrypt
- ูุณุชุฎุฏู JWT ูููุตุงุฏูุฉ
- CORS ููุนุฏู ุจุดูู ุฃุณุงุณู (ูุญุชุงุฌ ุชุฎุตูุต ููุฅูุชุงุฌ)

## ุงูุชุฑุฎูุต

ูุฐุง ุงููุดุฑูุน ููุฃุบุฑุงุถ ุงูุชุนููููุฉ ูุงูุชุทููุฑูุฉ.

## ๐ API Documentation

### ๐งฎ Accounting API Endpoints

#### ุงูุนููุงุช (Currencies)
- `GET /api/accounting/currencies` - ุฌูุจ ุฌููุน ุงูุนููุงุช
- `POST /api/accounting/currencies` - ุฅูุดุงุก ุนููุฉ ุฌุฏูุฏุฉ
- `GET /api/accounting/currencies/{id}` - ุฌูุจ ุนููุฉ ูุญุฏุฏุฉ
- `PUT /api/accounting/currencies/{id}` - ุชุญุฏูุซ ุงูุนููุฉ

#### ุฃุณุนุงุฑ ุงูุตุฑู (Exchange Rates)
- `GET /api/accounting/exchange-rates` - ุฌูุจ ุฃุณุนุงุฑ ุงูุตุฑู
- `POST /api/accounting/exchange-rates` - ุฅูุดุงุก ุณุนุฑ ุตุฑู ุฌุฏูุฏ
- `GET /api/accounting/exchange-rates/latest/{from}/{to}` - ุฌูุจ ุขุฎุฑ ุณุนุฑ ุตุฑู

#### ุฏููู ุงูุญุณุงุจุงุช (Chart of Accounts)
- `GET /api/accounting/chart-of-accounts` - ุฌูุจ ุฃุฏูุฉ ุงูุญุณุงุจุงุช
- `POST /api/accounting/chart-of-accounts` - ุฅูุดุงุก ุฏููู ุญุณุงุจุงุช ุฌุฏูุฏ
- `GET /api/accounting/chart-of-accounts/{id}` - ุฌูุจ ุฏููู ุญุณุงุจุงุช ูุญุฏุฏ

#### ุงูุญุณุงุจุงุช (Accounts)
- `GET /api/accounting/accounts` - ุฌูุจ ุงูุญุณุงุจุงุช ูุน ูุฑุดุญุงุช
- `POST /api/accounting/accounts` - ุฅูุดุงุก ุญุณุงุจ ุฌุฏูุฏ
- `GET /api/accounting/accounts/{id}` - ุฌูุจ ุญุณุงุจ ูุญุฏุฏ
- `PUT /api/accounting/accounts/{id}` - ุชุญุฏูุซ ุงูุญุณุงุจ

#### ุฏูุงุชุฑ ุงูููููุฉ (Journals)
- `GET /api/accounting/journals` - ุฌูุจ ุฏูุงุชุฑ ุงูููููุฉ
- `POST /api/accounting/journals` - ุฅูุดุงุก ุฏูุชุฑ ููููุฉ ุฌุฏูุฏ
- `GET /api/accounting/journals/{id}` - ุฌูุจ ุฏูุชุฑ ููููุฉ ูุญุฏุฏ

#### ุงููููุฏ ุงููุญุงุณุจูุฉ (Journal Entries)
- `GET /api/accounting/journal-entries` - ุฌูุจ ุงููููุฏ ูุน ูุฑุดุญุงุช
- `POST /api/accounting/journal-entries` - ุฅูุดุงุก ููุฏ ุฌุฏูุฏ
- `GET /api/accounting/journal-entries/{id}` - ุฌูุจ ููุฏ ูุญุฏุฏ
- `POST /api/accounting/journal-entries/{id}/post` - ุชุฑุญูู ุงูููุฏ
- `POST /api/accounting/journal-entries/{id}/reverse` - ุนูุณ ุงูููุฏ

#### ุงูุณููุงุช ูุงููุชุฑุงุช ุงููุงููุฉ (Fiscal Years & Periods)
- `GET /api/accounting/fiscal-years` - ุฌูุจ ุงูุณููุงุช ุงููุงููุฉ
- `POST /api/accounting/fiscal-years` - ุฅูุดุงุก ุณูุฉ ูุงููุฉ ุฌุฏูุฏุฉ
- `GET /api/accounting/accounting-periods` - ุฌูุจ ุงููุชุฑุงุช ุงููุญุงุณุจูุฉ
- `POST /api/accounting/accounting-periods` - ุฅูุดุงุก ูุชุฑุฉ ูุญุงุณุจูุฉ ุฌุฏูุฏุฉ
- `POST /api/accounting/accounting-periods/{id}/close` - ุฅุบูุงู ุงููุชุฑุฉ

#### ุงูุชูุงุฑูุฑ ุงููุงููุฉ (Financial Reports)
- `GET /api/accounting/reports/trial-balance` - ุชูุฑูุฑ ููุฒุงู ุงููุฑุงุฌุนุฉ
- `GET /api/accounting/reports/balance-sheet` - ุชูุฑูุฑ ุงูููุฒุงููุฉ ุงูุนููููุฉ
- `GET /api/accounting/reports/income-statement` - ุชูุฑูุฑ ูุงุฆูุฉ ุงูุฏุฎู

### ๐ POS API Endpoints

#### ุงูุฃุฌูุฒุฉ (Terminals)
- `GET /api/pos/terminals` - ุฌูุจ ุฃุฌูุฒุฉ ููุงุท ุงูุจูุน
- `POST /api/pos/terminals` - ุฅูุดุงุก ุฌูุงุฒ ุฌุฏูุฏ
- `GET /api/pos/terminals/{id}` - ุฌูุจ ุฌูุงุฒ ูุญุฏุฏ
- `PUT /api/pos/terminals/{id}` - ุชุญุฏูุซ ุงูุฌูุงุฒ

#### ุงูุฌูุณุงุช (Sessions)
- `GET /api/pos/sessions` - ุฌูุจ ุงูุฌูุณุงุช ูุน ูุฑุดุญุงุช
- `POST /api/pos/sessions` - ุฅูุดุงุก ุฌูุณุฉ ุฌุฏูุฏุฉ
- `GET /api/pos/sessions/{id}` - ุฌูุจ ุฌูุณุฉ ูุญุฏุฏุฉ
- `POST /api/pos/sessions/{id}/close` - ุฅุบูุงู ุงูุฌูุณุฉ
- `GET /api/pos/sessions/active/{terminal_id}` - ุฌูุจ ุงูุฌูุณุฉ ุงููุดุทุฉ

#### ุงููุนุงููุงุช (Transactions)
- `GET /api/pos/transactions` - ุฌูุจ ุงููุนุงููุงุช ูุน ูุฑุดุญุงุช
- `POST /api/pos/transactions` - ุฅูุดุงุก ูุนุงููุฉ ุฌุฏูุฏุฉ
- `GET /api/pos/transactions/{id}` - ุฌูุจ ูุนุงููุฉ ูุญุฏุฏุฉ
- `POST /api/pos/transactions/{id}/complete` - ุฅุชูุงู ุงููุนุงููุฉ
- `POST /api/pos/transactions/{id}/void` - ุฅูุบุงุก ุงููุนุงููุฉ
- `POST /api/pos/transactions/{id}/refund` - ุงุณุชุฑุฏุงุฏ ุงููุนุงููุฉ

#### ุงููุฏููุนุงุช (Payments)
- `GET /api/pos/payments` - ุฌูุจ ุงููุฏููุนุงุช
- `POST /api/pos/payments` - ุฅูุดุงุก ุฏูุนุฉ ุฌุฏูุฏุฉ

#### ุงูุฎุตููุงุช (Discounts)
- `GET /api/pos/discounts` - ุฌูุจ ุงูุฎุตููุงุช
- `POST /api/pos/discounts` - ุฅูุดุงุก ุฎุตู ุฌุฏูุฏ
- `GET /api/pos/discounts/{id}` - ุฌูุจ ุฎุตู ูุญุฏุฏ
- `PUT /api/pos/discounts/{id}` - ุชุญุฏูุซ ุงูุฎุตู
- `POST /api/pos/discounts/{id}/validate` - ุงูุชุญูู ูู ุตุญุฉ ุงูุฎุตู

#### ุงูุนุฑูุถ (Promotions)
- `GET /api/pos/promotions` - ุฌูุจ ุงูุนุฑูุถ
- `POST /api/pos/promotions` - ุฅูุดุงุก ุนุฑุถ ุฌุฏูุฏ
- `GET /api/pos/promotions/{id}` - ุฌูุจ ุนุฑุถ ูุญุฏุฏ
- `PUT /api/pos/promotions/{id}` - ุชุญุฏูุซ ุงูุนุฑุถ

#### ูุญุต ุงููุฎุฒูู (Inventory Checks)
- `GET /api/pos/inventory/check/{product_id}` - ูุญุต ุชููุฑ ุงููุฎุฒูู
- `GET /api/pos/inventory/stock/{product_id}` - ุฌูุจ ูููุฉ ุงููุฎุฒูู

#### ุงูุชูุงุฑูุฑ (Reports)
- `GET /api/pos/reports/sales` - ุชูุฑูุฑ ุงููุจูุนุงุช
- `GET /api/pos/reports/sessions` - ุชูุงุฑูุฑ ุงูุฌูุณุงุช
- `GET /api/pos/reports/product-sales` - ุชูุฑูุฑ ูุจูุนุงุช ุงูููุชุฌุงุช

## ๐ ุจุฏุก ุณุฑูุน

### ุชุดุบูู ุณุฑูุน ุจุงุณุชุฎุฏุงู ุงูุณูุฑูุจุช
```bash
# ุฅุนุทุงุก ุตูุงุญูุงุช ุงูุชูููุฐ
chmod +x startup.sh

# ุชุดุบูู ุงููุธุงู
./startup.sh
```

### ุชููุฆุฉ ุงูุจูุงูุงุช ุงูุงูุชุฑุงุถูุฉ
ุงูุณูุฑูุจุช ุณูููู ุชููุงุฆูุงู ุจุชููุฆุฉ:
- ุงูุนููุงุช ุงูุซูุงุซ (IQD, USD, RMB)
- ุฏููู ุญุณุงุจุงุช ูุนูุงุฑู
- ุฏูุงุชุฑ ููููุฉ ุงูุชุฑุงุถูุฉ
- ุงูุณูุฉ ุงููุงููุฉ ุงูุญุงููุฉ ูุน 12 ูุชุฑุฉ ูุญุงุณุจูุฉ
- ุฎุตููุงุช ูุนุฑูุถ ููุงุท ุงูุจูุน ุงูุงูุชุฑุงุถูุฉ

### ุฃูุซูุฉ ุนูู ุงูุงุณุชุฎุฏุงู

#### ุฅูุดุงุก ููุฏ ูุญุงุณุจู
```python
journal_entry = {
    "journal_id": 1,
    "period_id": 1,
    "entry_number": "JE-001",
    "description": "ููุฏ ุจูุน ููุฏู",
    "reference": "INV-001",
    "total_debit": 1000.0,
    "total_credit": 1000.0,
    "lines": [
        {
            "account_id": 5,  # ุงูููุฏูุฉ
            "description": "ููุฏูุฉ ูู ุงูุจูุน",
            "debit_amount": 1000.0,
            "credit_amount": 0.0
        },
        {
            "account_id": 12,  # ุฅูุฑุงุฏุงุช ุงููุจูุนุงุช
            "description": "ุฅูุฑุงุฏุงุช ุงูุจูุน",
            "debit_amount": 0.0,
            "credit_amount": 1000.0
        }
    ]
}
```

#### ุฅูุดุงุก ูุนุงููุฉ ููุทุฉ ุจูุน
```python
pos_transaction = {
    "session_id": 1,
    "transaction_number": "TXN-001",
    "customer_id": 1,
    "subtotal": 100.0,
    "tax_amount": 10.0,
    "discount_amount": 5.0,
    "total_amount": 105.0,
    "items": [
        {
            "product_id": 1,
            "quantity": 2,
            "unit_price": 50.0,
            "total_price": 100.0
        }
    ],
    "payments": [
        {
            "payment_method": "CASH",
            "amount": 105.0
        }
    ]
}
```

## ๐๏ธ ูููู ุงููุดุฑูุน ุงูููุญุฏุซ

```
erp_system/
โโโ app/
โ   โโโ models/
โ   โ   โโโ accounting.py    # ููุงุฐุฌ ุงููุญุงุณุจุฉ
โ   โ   โโโ pos.py          # ููุงุฐุฌ ููุงุท ุงูุจูุน
โ   โ   โโโ ...
โ   โโโ schemas/
โ   โ   โโโ accounting.py    # ูุฎุทุทุงุช ุงููุญุงุณุจุฉ
โ   โ   โโโ pos.py          # ูุฎุทุทุงุช ููุงุท ุงูุจูุน
โ   โ   โโโ ...
โ   โโโ routers/
โ   โ   โโโ accounting.py    # ููุงุท ููุงูุฉ ุงููุญุงุณุจุฉ
โ   โ   โโโ pos.py          # ููุงุท ููุงูุฉ ููุงุท ุงูุจูุน
โ   โ   โโโ ...
โ   โโโ services/
โ   โ   โโโ accounting_service.py  # ููุทู ุฃุนูุงู ุงููุญุงุณุจุฉ
โ   โ   โโโ pos_service.py        # ููุทู ุฃุนูุงู ููุงุท ุงูุจูุน
โ   โ   โโโ ...
โ   โโโ init_data.py        # ุชููุฆุฉ ุงูุจูุงูุงุช ุงูุงูุชุฑุงุถูุฉ
โ   โโโ ...
โโโ startup.sh              # ุณูุฑูุจุช ุงูุจุฏุก ุงูุณุฑูุน
โโโ ...
```